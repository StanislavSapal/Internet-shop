{% extends 'base.html' %}

{% block title %}
Архів замовлень {{ block.super }}
{% endblock %}


{% block content %}
{% load static %}
<div class="container-fluid">
    <div class="row px-xl-5">
        <div class="col-lg-12 table-responsive mb-5">
            <table class="table table-light table-borderless table-hover text-center mb-0">
                <thead class="thead-dark">
                <tr>
                    <th>Замовлення</th>
                    <th>Замовник</th>
                    <th>Товари</th>
                    <th>Ціна за одиницю</th>
                    <th>Кількість</th>
                    <th>Сума</th>
                    <th>Загальна сума</th>
                </tr>
                </thead>
                <tbody class="align-middle">
                {% for order in orders %}
                <tr>
                    <td class="align-left">
                        <h6 align="left"> ID {{ order.id }}</h6>
                        <p align="left">№ {{ order.order_number }} від {{ order.created|date:"F d, Y" }}</p>
                        <h6 align="left">{{ order.status }}</h6>
                    </td>
                    <td class="align-left">
                        <p align="left">{{ order.first_name }} {{ order.last_name }}</p>
                        <p align="left">{{ order.email }}</p>
                    </td>
                    <td class="align-left">
                        {% for item in order.cart.cartitem_set.all %}
                        <p align="left">
                            <a class="h6 text-decoration-none text-truncate"
                               href="{{ item.product.get_absolute_url }}">{{ item.product|truncatewords_html:6 }}
                            </a>
                        </p>
                        {% endfor %}
                    </td>
                    <td class="align-left">
                        {% for item in order.cart.cartitem_set.all %}
                        <p align="left">{{ item.product.price }} ₴</p>
                        {% endfor %}
                    </td>
                    <td class="align-left">
                        {% for item in order.cart.cartitem_set.all %}
                        <p align="left">{{ item.quantity }}</p>
                        {% endfor %}
                    </td>
                    <td class="align-left">
                        {% for item in order.cart.cartitem_set.all %}
                        <p align="left">{{ item.total_item_price }} ₴</p>
                        {% endfor %}
                    </td>
                    <td class="align-left">
                        <h6 align="left">{{ order.cart.total_cart_sum.price_total }} ₴</h6>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}